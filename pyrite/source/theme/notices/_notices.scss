@use "backend" as *;
/* Start Notices */
// local variable
$nc: var(--notice-count, 0);

#{c(main base)} :where(#{c(bd notices)}:not(:empty),#{c(notice)}) { // using :where() instead of :is() because specificity
	~#{c(main content)} {
		--notice-count: 1;
	}
	+#{c(notice)} {
		~#{c(main content)} {
			--notice-count: 2;
		}
		+#{c(notice)}~#{c(main content)} {
			--notice-count: 3;
		}
	}
}
// notice base
// it's done in this odd manner to bypass specificity
:is(:where(#{c(bd notices)}:not(:empty)),#{c(notice)}) {
	border-radius: 0;
	box-shadow: none;
	max-height: 36px;
	padding: 0;
	// movement and width stuff
	@debug "broken with hide channel list";
	// 72px for server list, undo 72px for HSL addon
	width: calc(100vw - 72px + (72px * var(--horizontal-server-list-enabled,0)));
	// left: 240px; // move it over
	top: 48px; // move it below header
}

#{c(notice)} {
	border: none;
}

// It works somehow lol
#{c(chat page)} {
	max-height: calc(100vh - (36px * $nc));
}
#{c(sidebar private channels)} {
	overflow: visible;
	// height calc: 100vh (total height) ; 36px per notice
	max-height: calc(100vh - (36px * $nc));
}
#{c(header)},
#{c(sidebar server header container)},
#{c(chat noChannel)}::before,
#{c(discover pageWrapper)}::before,
#{c(sidebar private searchBar)} {
	top: calc(-36px * $nc);
}
:is(:where(#{c(bd notices)}:not(:empty)),#{c(notice)}) ~ #{c(main content)} {
	// unset overflow for these areas: friends, chat, call, side-thread
	:is(#{c(friends container)},#{c(chat page)},#{c(chat)},#{c(call container)},#{c(threads container)}) {
		overflow: unset;
	}
	
	// increase height of resize handle for threads
	#{c(threads resizeHandle)} {
		top: calc(-36px * $nc);
		height: 100vh;
		position: relative;
	}
	
}


// specific notices
#{c(notice completeSteps)},
#{c(notice viewServerAsRole)},
#{c(notice previewServerNotice)} {
	height: 36px;
}
#{c(notice colorDefault)} {
	background-color: $green;
}
#{c(notice colorWarning)} {
	background-color: $yellow;
}
#{c(notice colorDanger)} {
	background-color: $red;
}